<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link href="style.css" rel="stylesheet">
  </head>
  <body>
    <button id="newTweets">Display new tweets</button>
    <script>

      $(document).ready(function(){
        var $body = $('body');

        var index = 0;
        while(index < streams.home.length){
          var tweet = streams.home[index];
          var $tweet = `<div><strong>@${tweet.user}</strong>: <time>${tweet.created_at}</time><br>${tweet.message}</div>`;
          $($tweet).appendTo($body);
          index += 1;
        }

        $('#newTweets').click(function(event) {
          while(index < streams.home.length) {
            var tweet = streams.home[index];
            var $tweet = `<div><strong>@${tweet.user}</strong>: <time>${tweet.created_at}</time><br>${tweet.message}</div>`;
            $($tweet).prependTo($body);
            index += 1;
          }
        });

        $body.on('click', 'strong', function(event) {
          var clickedUser = $(this).text();
          $('strong').filter(function() { return $(this).text() !== clickedUser}).parent().hide();

          $body.prepend('<button id="back">Back</button>');
          $('#newTweets').hide();
        });

        $body.on('click', '#back', function(event) {
          $(':hidden').show();
          $('#newTweets').trigger('click');
          $('#back').remove();
        });
      });
    </script>
  </body>
</html>
